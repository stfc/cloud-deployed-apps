stfc-cloud-harbor:
  harbor:
    externalURL: "https://staging.harbor.stfc.ac.uk"

    expose:
      ingress:
        className: ingress-nginx-harbor
        hosts:
          core: "staging.harbor.stfc.ac.uk"

    database:
      type: external
      external:
        host: "dbspgha03.fds.rl.ac.uk"
        coreDatabase: "cloud_harbor_registry_dev"

    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
        additionalLabels:
          release: kube-prometheus
        interval: 30s
        scrapeTimeout: 25s

  backup:
    enabled: true
    sourceBucket: "s3://staging-harbor-bucket"
    destination:
      daily: "s3://staging-harbor-backup/daily"
      weekly: "s3://staging-harbor-backup/weekly"
      monthly: "s3://staging-harbor-backup/monthly"
    endpoint: "https://s3.echo.stfc.ac.uk"

ingress-nginx-harbor:
  controller:
    electionID: harbor-ingress-controller-leader
    ingressClass: ingress-nginx-harbor
    ingressClassResource:
      name: ingress-nginx-harbor
      enabled: true
      default: false
      controllerValue: "k8s.io/ingress-nginx-harbor"
    service:
      annotations:
        # Don't delete the floating ip when deleting loadbalancers
        # prevents errors when deleting clusters, leave as true
        loadbalancer.openstack.org/keep-floatingip: true
      loadBalancerIP: "130.246.81.227"
