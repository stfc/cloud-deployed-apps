stfc-cloud-harbor:
  harbor:
    caSecretName: harbor-tls
    externalURL: "https://staging.harbor.stfc.ac.uk"

    persistence:
      imageChartStorage:
        s3:
          bucket: staging-harbor-bucket
          regionendpoint: s3.echo.stfc.ac.uk

    expose:
      tls: 
        certSource: secret
        secret: 
          secretName: harbor-tls
      ingress:
        annotations:
          kubernetes.io/ingress.class: ingress-nginx-external
          cert-manager.io/cluster-issuer: letsencrypt-prod
        className: ingress-nginx-external
        hosts:
          core: "staging.harbor.stfc.ac.uk"

    database:
      type: external
      external:
        host: "dbspgha03.fds.rl.ac.uk"
        coreDatabase: "cloud_harbor_registry_dev"

    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
        additionalLabels:
          release: kube-prometheus
        interval: 30s
        scrapeTimeout: 25s

  backup:
    enabled: true
    sourceBucket: "s3://staging-harbor-bucket"
    destination:
      daily: "s3://staging-harbor-backup/daily"
      weekly: "s3://staging-harbor-backup/weekly"
      monthly: "s3://staging-harbor-backup/monthly"
    endpoint: "https://s3.echo.stfc.ac.uk"
